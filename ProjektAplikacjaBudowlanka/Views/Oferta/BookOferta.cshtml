@model ProjektAplikacjaBudowlanka.Models.DTO.Rezerwacja.RezerwacjaAddDTO;
<h2>Nowa Oferta</h2>
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-danger">
        @TempData["SuccessMessage"]
    </div>
}
<form asp-action="BookOferta" method="post">
    <div class="form-group">
        <label asp-for="Nazwa">Nazwa:</label>
        <input asp-for="Nazwa" class="form-control" readonly />
    </div>

    <div class="form-group">
        <label asp-for="Opis">Opis:</label>
        <input asp-for="Opis" class="form-control" readonly />
    </div>
    <div class="form-group">
        <label asp-for="Dniowka">Dniówka:</label>
        <input asp-for="Dniowka" class="form-control" type="number" readonly />
    </div>
    <div class="form-group">
        <label asp-for="DataOd">Data od:</label>
        <span id="NazwiskoSpan" class="text-danger">@ViewData["DataOdSpan"]</span>
        <input asp-for="DataOd" class="form-control" type="date" oninput="updateKoszt()" />
    </div>
    <div class="form-group">
        <label asp-for="DataDo">Data do:</label>
        <span id="NazwiskoSpan" class="text-danger">@ViewData["DataDoSpan"]</span>
        <input asp-for="DataDo" class="form-control" type="date" oninput="updateKoszt()" />
    </div>
    <div class="form-group">
        <label asp-for="Koszt">Koszt:</label>
        <input id="KosztInput" asp-for="Koszt" class="form-control" type="number" readonly />
    </div>

    <div class="form-group" hidden>
        <label asp-for="IdOferta">Id:</label>
        <input asp-for="IdOferta" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary">Zarezerwuj ofertę</button>
</form>
<script>
    function updateKoszt() {
        var dataOd = new Date(document.getElementById('DataOd').value);
        var dataDo = new Date(document.getElementById('DataDo').value);
        var dniRoznicy = (dataDo - dataOd) / (1000 * 60 * 60 * 24);
        var dniowka = parseFloat(document.getElementById('Dniowka').value);
        var koszt = dniRoznicy * dniowka;
        if (koszt < 0)
            koszt = 0;
        if (dniRoznicy == 0)
            koszt = dniowka;
        document.getElementById('KosztInput').value = koszt.toFixed(2);
    }
</script>